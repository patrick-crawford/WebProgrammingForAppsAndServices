"use strict";(self.webpackChunkOERTemplate=self.webpackChunkOERTemplate||[]).push([[503],{7563:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Pages-Routing/layouts-and-pages","title":"Layouts & Pages","description":"Layouts & Pages","source":"@site/docs/Pages-Routing/layouts-and-pages.md","sourceDirName":"Pages-Routing","slug":"/Pages-Routing/layouts-and-pages","permalink":"/WebProgrammingForAppsAndServices/Pages-Routing/layouts-and-pages","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Pages-Routing/layouts-and-pages.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"layouts-and-pages","title":"Layouts & Pages","sidebar_position":1,"description":"Layouts & Pages"},"sidebar":"courseNotesSidebar","previous":{"title":"Example Code","permalink":"/WebProgrammingForAppsAndServices/Handling-Events-Rendering-Data/example-code"},"next":{"title":"Dynamic Routes","permalink":"/WebProgrammingForAppsAndServices/Pages-Routing/dynamic-routes"}}');var o=s(4848),r=s(8453);const i={id:"layouts-and-pages",title:"Layouts & Pages",sidebar_position:1,description:"Layouts & Pages"},a="Layouts & Pages",l={},d=[{value:"Adding a Route",id:"adding-a-route",level:2},{value:"Nested Routes",id:"nested-routes",level:2},{value:"Layouts",id:"layouts",level:2},{value:"Client-Side Page Transitions",id:"client-side-page-transitions",level:2},{value:"Link Component",id:"link-component",level:3},{value:"useRouter Hook",id:"userouter-hook",level:3}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"layouts--pages",children:"Layouts & Pages"})}),"\n",(0,o.jsx)(n.p,{children:'Until now, we have only worked with a single "page" in our Next.js app: "Home", defined by the "Home" component, located within the index.js file in the "pages" folder. In this section, we explore how to add additional routes (pages) to the application.'}),"\n",(0,o.jsx)(n.h2,{id:"adding-a-route",children:"Adding a Route"}),"\n",(0,o.jsxs)(n.p,{children:['Each "route" in our application / site is defined by the name of the file within the "pages" folder. In this case, we only have one route "/" because there is only one file in the "pages" folder: ',(0,o.jsx)(n.strong,{children:"index.js"}),' (not including "_app.js" which is used to initialize pages - discussed later on).']}),"\n",(0,o.jsx)(n.p,{children:'We will be adding another route at "/about". When complete, our application will have two routes:'}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'Route: "/" - Renders component from "pages/index.js"'}),"\n",(0,o.jsx)(n.li,{children:'Route "/about" - Renders component from "pages/about.js"'}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Here's how to add the /about route:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the project's ",(0,o.jsx)(n.code,{children:"pages"})," folder, add a file called: ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"about.js"})})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",metastring:'title="Pages folder structure"',children:"\ud83d\udcc2 pages\n \u2523 \ud83d\udcc2api\n \u2523 \ud83d\udcc2dashboard\n \u2523 \ud83d\udcc2fonts\n \u2503 _app.js\n \u2523 _document.js\n \u2523 about.js      <-- added this file\n \u2517 index.js\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.code,{children:"about.js"})," file, add this code:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="/pages/about.js"',children:"export default function About() {\n  return (\n    <>\n      <p>About</p>\n    </>\n  );\n}\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"caution",children:(0,o.jsxs)(n.p,{children:["The name of the exported component does ",(0,o.jsx)(n.em,{children:"not"})," need to match the file name, since it is the file name that defines the route. However, the name of the component ",(0,o.jsx)(n.strong,{children:"must be capitalized"})," as usual."]})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"In the browser, visit the /about route. The page contents will appear."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"nested-routes",children:"Nested Routes"}),"\n",(0,o.jsxs)(n.p,{children:['It is sometimes necessary to define routes that are "nested" ie: "/dashboard/preferences". To achieve this, we simply need to recreate the nested route as a nested folder structure within the pages folder. Additionally, if we place an ',(0,o.jsx)(n.strong,{children:"index.js"})," file nested within another folder, Next.js will automatically serve that component as the default route for that folder."]}),"\n",(0,o.jsx)(n.p,{children:'Let\'s expand our current list of routes to add two "dashboard" routes:'}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:['Route: "',(0,o.jsx)(n.strong,{children:"/dashboard"}),'" - Renders component from "pages/dashboard/index.js"']}),"\n",(0,o.jsxs)(n.li,{children:['Route "',(0,o.jsx)(n.strong,{children:"/dashboard/preferences"}),'" - Renders component from "pages/dashboard/preferences.js"']}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.code,{children:"pages"})," folder, add a folder called ",(0,o.jsx)(n.code,{children:"dashboard"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"\ud83d\udcc2 pages\n\u2523 \ud83d\udcc2 api\n\u2523 \ud83d\udcc2 dashboard <-- create this folder\n\u2523 \ud83d\udcc2 fonts\n\u2523 index.js\n\u2517 ... etc\n\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["Within the ",(0,o.jsx)(n.code,{children:"pages/dashboard"})," folder, add two new components:"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File:"}),' "pages/dashboard/index.js"']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File:"}),' "pages/dashboard/preferences.js"']}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"\ud83d\udcc2 pages\n \u2523 \ud83d\udcc2 api\n \u2523 \ud83d\udcc2 dashboard\n \u2503 \u2523 index.js         <-- add this file\n \u2503 \u2517 preferences.js   <-- add this file\n \u2523 \ud83d\udcc2 fonts\n \u2523 index.js\n \u2517 ... etc\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"In each file, add the code for a new endpoint:"}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Code snippet for the ",(0,o.jsx)(n.code,{children:"dashboard/index.js"})," page:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="pages/dashboard/index.js"',children:"export default function DashboardHome() {\n  return (\n    <>\n      <p>Dashboard Home</p>\n    </>\n  );\n}\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Code for the ",(0,o.jsx)(n.code,{children:"dashboard/preferences"})," page:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="pages/dashboard/preferences.js"',children:"export default function DashboardPreferences() {\n  return (\n    <>\n      <p>Dashboard Preferences</p>\n    </>\n  );\n}\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"When complete, the application has this updated list of routes:"}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'Route: "/" - Renders component from "pages/index.js"'}),"\n",(0,o.jsx)(n.li,{children:'Route "/about" - Renders component from "pages/about.js"'}),"\n",(0,o.jsx)(n.li,{children:'Route: "/dashboard" - Renders component from "pages/dashboard/index.js"'}),"\n",(0,o.jsx)(n.li,{children:'Route "/dashboard/preferences" - Renders component from "pages/dashboard/preferences.js"'}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"layouts",children:"Layouts"}),"\n",(0,o.jsx)(n.p,{children:'If we have components that are re-used across multiple pages (ie: a common "navbar" / "footer"), we can place these in a custom "Layout" component, which can then be specified for the whole application. Let\'s begin by creating a very simple layout without any extra components.'}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the project's ",(0,o.jsx)(n.code,{children:"components"})," folder, add a new file called ",(0,o.jsx)(n.code,{children:"layout.js"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\ud83d\udce6 my-app\n \u2523 \ud83d\udcc2 components\n \u2503 \u2517 layout.js        <-- add this file\n \u2523 \ud83d\udcc2pages\n \u2523 \ud83d\udcc2public\n \u2523 \ud83d\udcc2styles\n \u2523 README.md\n \u2523 package-lock.json\n \u2517 ... etc\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"caution",children:(0,o.jsxs)(n.p,{children:['Since layouts are not "pages", they ',(0,o.jsx)(n.strong,{children:"must not"}),' be placed within the "pages" folder - instead, place them in a "components" folder, as we have previously done.']})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.code,{children:"components/layout.js"})," file, add this code:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="components/layout.js"',children:'export default function Layout(props) {\n  return (\n    <>\n      <h1>Pages / Routing in Next.js</h1>\n      <a href="/">Home</a> | <a href="/about">About</a> | <a href="/dashboard">Dashboard</a> | <a href="/dashboard/preferences">Dashboard Preferences</a>\n      <hr />\n      <br />\n      {props.children}\n      <br />\n    </>\n  );\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:['You will notice that this looks exactly like any other custom component that we have created before, except instead of rendering specific data passed to props (or within the "state" of the component), it renders ',(0,o.jsx)(n.a,{href:"https://react.dev/learn/passing-props-to-a-component#passing-jsx-as-children",children:'"props.children"'}),'. This is essentially a placeholder that renders the children of the component at a specific point in the layout. When using "props.children", we will be including the component using the form "<Layout></Layout>" instead of the "self-closing" notation (ie: <Layout />) that we have used so far.']}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:['To include this layout in all our pages, we must open the aforementioned "_app.js" file located within the "pages" folder and "wrap" the ',(0,o.jsx)(n.code,{children:"<Component {...pageProps} />"})," with our new layout:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="pages/_app.js"',children:"import Layout from '@/components/layout';\nimport '@/styles/globals.css';\n\nexport default function App({ Component, pageProps }) {\n  return (\n    <Layout>\n      <Component {...pageProps} />\n    </Layout>\n  );\n}\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"Navigate to the website. You will see a common navigation bar with links to all our newly created routes."}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["It is also possible to configure layouts on a page-by-page basis. See the ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/basic-features/layouts#per-page-layouts",children:"official documentation"})," for more information."]})}),"\n",(0,o.jsx)(n.h2,{id:"client-side-page-transitions",children:"Client-Side Page Transitions"}),"\n",(0,o.jsx)(n.p,{children:'When browsing the site, you may have noticed that each route takes a moment to load, despite the fact there is little difference between the UI / DOM for each route. This is because the entirety of the app (ie: all .js files) is downloaded each time a new route is accessed - this can be confirmed by viewing the network activity in the dev tools. Fortunately, Next.js provides a mechanism to transition between pages without reloading every .js file for the application. This is known as "client-side routing" / "client-side route transitions".'}),"\n",(0,o.jsx)(n.h3,{id:"link-component",children:"Link Component"}),"\n",(0,o.jsxs)(n.p,{children:["Client-side routing can be achieved by replacing anchor tags (<a>...</a>) with custom ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/link",children:'"Link" Components'}),' (<Link>...</Link>) containing the "href" attribute. Let\'s test this by refactoring our Layout to use "Link":']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="components/layout.js"',children:'import Link from \'next/link\';\n\nexport default function Layout(props) {\n  return (\n    <>\n      <h1>Pages / Routing in Next.js</h1>\n      <Link href="/">Home</Link> | <Link href="/about">About</Link> | <Link href="/dashboard">Dashboard</Link> | <Link href="/dashboard/preferences">Dashboard Preferences</Link>\n      <hr />\n      <br />\n      {props.children}\n      <br />\n    </>\n  );\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["You will find that the page transitions are much faster and that only the relevant .js is loaded when each route is first accessed. Once that route is accessed for a second time, nothing is download from the server - loading the required .js files on demand is known as ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading",children:'"Lazy Loading"'}),"."]}),"\n",(0,o.jsxs)(n.p,{children:['It is also important to note that the "Link" component accepts the following props (from the ',(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/link",children:"official documentation"}),"):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"href"})," - The path or URL to navigate to. This is the only required prop"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"as"})," - Optional decorator for the path that will be shown in the browser URL bar."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"legacyBehavior"})," - Changes behavior so that child must be <a>. Defaults to false."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NOTE"}),": This is important to use if ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/link#if-the-child-is-a-custom-component-that-wraps-an-a-tag",children:"the child is a custom component that wraps the <a> tag"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"passHref"})," - Forces Link to send the href property to its child. Defaults to false"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"prefetch"})," - Prefetch the page in the background. Defaults to true. Any <Link /> that is in the viewport (initially or through scroll) will be preloaded. Prefetch can be disabled by passing prefetch=",!1,". When prefetch is set to false, prefetching will still occur on hover. Pages using Static Generation will preload JSON files with the data for faster page transitions. Prefetching is only enabled in production."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"replace"})," - Replace the current history state instead of adding a new url into the stack. Defaults to false"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"scroll"})," - Scroll to the top of the page after a navigation. Defaults to true"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"shallow"})," - Update the path of the current page without rerunning getStaticProps, getServerSideProps or getInitialProps. Defaults to false"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"locale"})," - The active locale is automatically prepended. locale allows for providing a different locale. When false href has to include the locale as the default behavior is disabled."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"userouter-hook",children:"useRouter Hook"}),"\n",(0,o.jsxs)(n.p,{children:['If we wish to achieve the same effect from within our component logic (such as in an "onClick" event handler), we must make use of the ',(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/router#userouter",children:'"useRouter"'}),' hook from "next/router":']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"import { useRouter } from 'next/router';\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This hook will be used to obtain a ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/router#router-object",children:'"router"'}),' object from within our component by invoking "useRouter()":']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const router = useRouter();\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/router#router-object",children:"router object"})," itself has ",(0,o.jsx)(n.em,{children:"many useful properties"}),", such as:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"pathname:"})," The current route - the path of the page in /pages."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"query:"})," The query string parsed to an object, including dynamic route parameters. It will be an empty object during prerendering if the page doesn't have data fetching requirements. Defaults to "]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["However, at the moment we are most interested in the ",(0,o.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/next/router#routerpush",children:'"push"'})," method to transition to a new route:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"router.push('/'); // navigate to the home route \"/\"\n"})}),"\n",(0,o.jsx)(n.p,{children:"This method accepts three arguments, ie:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"url"}),": The URL to navigate to (either as a string or ",(0,o.jsx)(n.a,{href:"https://nodejs.org/api/url.html#legacy-urlobject",children:"urlObject"}),")"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"as"}),": Optional decorator for the path that will be shown in the browser URL bar."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"options"}),": Optional object with the following configuration options:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"scroll"}),": Optional boolean, controls scrolling to the top of the page after navigation. Defaults to true"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"shallow"}),": Update the path of the current page without rerunning getStaticProps, getServerSideProps or getInitialProps. Defaults to false"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"locale"}),": Optional string, indicates locale of the new page"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var t=s(6540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);