"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[2383],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),l=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=l(a),d=o,m=c["".concat(p,".").concat(d)]||c[d]||h[d]||r;return a?n.createElement(m,s(s({ref:t},u),{},{components:a})):n.createElement(m,s({ref:t},u))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var l=2;l<r;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2938:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=a(7462),o=(a(7294),a(3905));a(8209);const r={id:"layouts-and-pages",title:"Layouts & Pages",sidebar_position:1,description:"Layouts & Pages"},s="Layouts & Pages",i={unversionedId:"Pages-Routing/layouts-and-pages",id:"Pages-Routing/layouts-and-pages",title:"Layouts & Pages",description:"Layouts & Pages",source:"@site/docs/Pages-Routing/layouts-and-pages.md",sourceDirName:"Pages-Routing",slug:"/Pages-Routing/layouts-and-pages",permalink:"/Pages-Routing/layouts-and-pages",draft:!1,editUrl:"hhttps://github.com/patrick-crawford/WebProgrammingForAppsAndServices/tree/master/docs/Pages-Routing/layouts-and-pages.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"layouts-and-pages",title:"Layouts & Pages",sidebar_position:1,description:"Layouts & Pages"},sidebar:"courseNotesSidebar",previous:{title:"Example Code",permalink:"/Handling-Events-Rendering-Data/example-code"},next:{title:"Dynamic Routes",permalink:"/Pages-Routing/dynamic-routes"}},p={},l=[{value:"Nested Routes",id:"nested-routes",level:2},{value:"Layouts",id:"layouts",level:2},{value:"Client-Side Page Transitions",id:"client-side-page-transitions",level:2},{value:"Link Component",id:"link-component",level:3},{value:"useRouter Hook",id:"userouter-hook",level:3}],u={toc:l},c="wrapper";function h(e){let{components:t,...a}=e;return(0,o.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"layouts--pages"},"Layouts & Pages"),(0,o.kt)("p",null,'Until now, we have only worked with a single "page" in our Next.js app: "Home", defined by the "Home" component, located within the index.js file in the "pages" folder.'),(0,o.kt)("p",null,'Each "route" in our application / site is defined by the name of the file within the "pages" folder. In this case, since we only have one file in the pages folder: ',(0,o.kt)("strong",{parentName:"p"},"index.js"),' (not including "',"_",'app.js" which is used to initialize pages - discussed later on), we only have one route "/". If we add another file, ie: "about.js" in the "pages" folder:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function About() {\n  return (\n    <>\n      <p>About</p>\n    </>\n  );\n}\n")),(0,o.kt)("p",null,'we will be adding another route at "/about" giving us:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'Route: "/" - Renders component from "pages/index.js"'),(0,o.kt)("li",{parentName:"ul"},'Route "/about" - Renders component from "pages/about.js"')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE:")," The name of the exported component does ",(0,o.kt)("em",{parentName:"p"},"not")," need to match the file name, since it is the file name that defines the route. However, the name of the component ",(0,o.kt)("strong",{parentName:"p"},"must be capitalized")," as usual.")),(0,o.kt)("h2",{id:"nested-routes"},"Nested Routes"),(0,o.kt)("p",null,'It is sometimes necessary to define routes that are "nested" ie: "/dashboard/preferences". To achieve this, we simply need to recreate the nested route as a nested folder structure within the pages folder. Additionally, if we place an ',(0,o.kt)("strong",{parentName:"p"},"index.js"),' file nested within another folder, Next.js will automatically serve that component as the default route for that folder. For example, if we wish to expand our current list of routes to add two "dashboard" routes, we can create the components:'),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"File:"),' "pages/dashboard/index.js"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function DashboardHome() {\n  return (\n    <>\n      <p>Dashboard Home</p>\n    </>\n  );\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"File:"),' "pages/dashboard/preferences.js"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function DashboardPreferences() {\n  return (\n    <>\n      <p>Dashboard Preferences</p>\n    </>\n  );\n}\n")),(0,o.kt)("p",null,"Which will give us the updated list of routes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'Route: "/" - Renders component from "pages/index.js"'),(0,o.kt)("li",{parentName:"ul"},'Route "/about" - Renders component from "pages/about.js"'),(0,o.kt)("li",{parentName:"ul"},'Route: "/dashboard" - Renders component from "pages/dashboard/index.js"'),(0,o.kt)("li",{parentName:"ul"},'Route "/dashboard/preferences" - Renders component from "pages/dashboard/preferences.js"')),(0,o.kt)("h2",{id:"layouts"},"Layouts"),(0,o.kt)("p",null,'If we have components that are re-used across multiple pages (ie: a common "navbar" / "footer"), we can place these in a custom "Layout" component, which can then be specified for the whole application. Let\'s begin by creating a very simple layout without any extra components:'),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE:"),' Since layouts are not "pages", they ',(0,o.kt)("em",{parentName:"p"},"must not"),' be placed within the "pages" folder - instead, place them in a "components" folder, as we have previously done.')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"File:"),' "components/layout.js"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'export default function Layout(props) {\n  return (\n    <>\n      <h1>Pages / Routing in Next.js</h1>\n      <a href="/">Home</a> | <a href="/about">About</a> | <a href="/dashboard">Dashboard</a> | <a href="/dashboard/preferences">Dashboard Preferences</a>\n      <hr />\n      <br />\n      {props.children}\n      <br />\n    </>\n  );\n}\n')),(0,o.kt)("p",null,'You will notice that this looks exactly like any other custom component that we have created before, except instead of rendering specific data passed to props (or within the "state" of the component), it renders ',(0,o.kt)("a",{parentName:"p",href:"https://react.dev/learn/passing-props-to-a-component#passing-jsx-as-children"},'"props.children"'),'. This is essentially a placeholder that renders the children of the component at a specific point in the layout. When using "props.children", we will be including the component using the form "',"<","Layout",">","<","/Layout",">",'" instead of the "self-closing" notation (ie: ',"<","Layout /",">",") that we have used so far."),(0,o.kt)("p",null,'To include this layout in all our pages, we must open the aforementioned "',"_",'app.js" file located within the "pages" folder and "wrap" the "',"<","Component {...pageProps} /",">",'" with our new layout:'),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"File:"),' "pages/',"_",'app.js"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import Layout from '@/components/layout';\nimport '@/styles/globals.css';\n\nfunction MyApp({ Component, pageProps }) {\n  return (\n    <Layout>\n      <Component {...pageProps} />\n    </Layout>\n  );\n}\n\nexport default MyApp;\n")),(0,o.kt)("p",null,"If we browse the site now, we should see a common navigation bar with links to all our newly created routes."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE"),": It is also possible to configure layouts on a page-by-page basis. See the ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/basic-features/layouts#per-page-layouts"},"official documentation")," for more information.")),(0,o.kt)("h2",{id:"client-side-page-transitions"},"Client-Side Page Transitions"),(0,o.kt)("p",null,'When browsing the site, you may have noticed that each route takes a moment to load, despite the fact there is little difference between the UI / DOM for each route. This is because the entirety of the app (ie: all .js files) is downloaded each time a new route is accessed - this can be confirmed by viewing the network activity in the dev tools. Fortunately, Next.js provides a mechanism to transition between pages without reloading every .js file for the application. This is known as "client-side routing" / "client-side route transitions".'),(0,o.kt)("h3",{id:"link-component"},"Link Component"),(0,o.kt)("p",null,"Client-side routing can be achieved by wrapping any anchor tags (","<","a:",">","...","<","/a",">",") with a custom ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/link"},'"Link" Component')," (","<","Link",">","...","<","/Link",">",') containing the "href" attribute. Let\'s test this by refactoring our Layout to use "Link":'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import Link from \'next/link\';\n\nexport default function Layout(props) {\n  return (\n    <>\n      <h1>Pages / Routing in Next.js</h1>\n      <Link href="/">Home</Link> | <Link href="/about">About</Link> | <Link href="/dashboard">Dashboard</Link> | <Link href="/dashboard/preferences">Dashboard Preferences</Link>\n      <hr />\n      <br />\n      {props.children}\n      <br />\n    </>\n  );\n}\n')),(0,o.kt)("p",null,"You will find that the page transitions are much faster and that only the relevant .js is loaded when each route is first accessed. Once that route is accessed for a second time, nothing is download from the server - loading the required .js files on demand is known as ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading"},'"Lazy Loading"'),"."),(0,o.kt)("p",null,'It is also important to note that the "Link" component accepts the following props (from the ',(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/link"},"official documentation"),"):"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"href")," - The path or URL to navigate to. This is the only required prop")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"as")," - Optional decorator for the path that will be shown in the browser URL bar.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"legacyBehavior")," - Changes behavior so that child must be ","<","a",">",". Defaults to false."),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE"),": This is important to use if ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/link#if-the-child-is-a-custom-component-that-wraps-an-a-tag"},"the child is a custom component that wraps the ","<","a",">"," tag")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"passHref")," - Forces Link to send the href property to its child. Defaults to false")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"prefetch")," - Prefetch the page in the background. Defaults to true. Any ","<","Link /",">"," that is in the viewport (initially or through scroll) will be preloaded. Prefetch can be disabled by passing prefetch={false}. When prefetch is set to false, prefetching will still occur on hover. Pages using Static Generation will preload JSON files with the data for faster page transitions. Prefetching is only enabled in production.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"replace")," - Replace the current history state instead of adding a new url into the stack. Defaults to false")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"scroll")," - Scroll to the top of the page after a navigation. Defaults to true")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"shallow")," - Update the path of the current page without rerunning getStaticProps, getServerSideProps or getInitialProps. Defaults to false")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"locale")," - The active locale is automatically prepended. locale allows for providing a different locale. When false href has to include the locale as the default behavior is disabled."))),(0,o.kt)("h3",{id:"userouter-hook"},"useRouter Hook"),(0,o.kt)("p",null,'If we wish to achieve the same effect from within our component logic (such as in an "onClick" event handler), we must make use of the ',(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#userouter"},'"useRouter"'),' hook from "next/router":'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useRouter } from 'next/router';\n")),(0,o.kt)("p",null,"This hook will be used to obtain a ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#router-object"},'"router"'),' object from within our component by invoking "useRouter()":'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"const router = useRouter();\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#router-object"},"router object")," itself has ",(0,o.kt)("em",{parentName:"p"},"many useful properties"),", such as:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"pathname:")," The current route - the path of the page in /pages.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"query:")," The query string parsed to an object, including dynamic route parameters. It will be an empty object during prerendering if the page doesn't have data fetching requirements. Defaults to {}"))),(0,o.kt)("p",null,"However, at the moment we are most interested in the ",(0,o.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#routerpush"},'"push"')," method to transition to a new route:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"router.push('/'); // navigate to the home route \"/\"\n")),(0,o.kt)("p",null,"This method accepts three arguments, ie:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"url"),": The URL to navigate to (either as a string or ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/api/url.html#legacy-urlobject"},"urlObject"),")")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"as"),": Optional decorator for the path that will be shown in the browser URL bar.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"options"),": Optional object with the following configuration options:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"scroll"),": Optional boolean, controls scrolling to the top of the page after navigation. Defaults to true")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"shallow"),": Update the path of the current page without rerunning getStaticProps, getServerSideProps or getInitialProps. Defaults to false")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"locale"),": Optional string, indicates locale of the new page"))))))}h.isMDXComponent=!0},8209:(e,t,a)=>{a(7294)}}]);