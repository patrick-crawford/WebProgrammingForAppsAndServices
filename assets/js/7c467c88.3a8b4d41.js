"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[2108],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>g});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),u=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},l="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),l=u(r),m=n,g=l["".concat(p,".").concat(m)]||l[m]||d[m]||o;return r?a.createElement(g,s(s({ref:t},c),{},{components:r})):a.createElement(g,s({ref:t},c))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[l]="string"==typeof e?e:n,s[1]=i;for(var u=2;u<o;u++)s[u]=r[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6962:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var a=r(7462),n=(r(7294),r(3905));r(8209);const o={id:"dynamic-routes",title:"Dynamic Routes",sidebar_position:2,description:"Dynamic Routes"},s="Dynamic Routes",i={unversionedId:"Pages-Routing/dynamic-routes",id:"Pages-Routing/dynamic-routes",title:"Dynamic Routes",description:"Dynamic Routes",source:"@site/docs/Pages-Routing/dynamic-routes.md",sourceDirName:"Pages-Routing",slug:"/Pages-Routing/dynamic-routes",permalink:"/Pages-Routing/dynamic-routes",draft:!1,editUrl:"hhttps://github.com/patrick-crawford/WebProgrammingForAppsAndServices/tree/master/docs/Pages-Routing/dynamic-routes.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"dynamic-routes",title:"Dynamic Routes",sidebar_position:2,description:"Dynamic Routes"},sidebar:"courseNotesSidebar",previous:{title:"Layouts & Pages",permalink:"/Pages-Routing/layouts-and-pages"},next:{title:"Example Code",permalink:"/Pages-Routing/example-code"}},p={},u=[{value:"Reading Route Parameters",id:"reading-route-parameters",level:2},{value:"Reading Query Parameters",id:"reading-query-parameters",level:2},{value:"Dynamic Routes with &#39;getStaticProps&#39;",id:"dynamic-routes-with-getstaticprops",level:2},{value:"Custom Error Pages",id:"custom-error-pages",level:2}],c={toc:u},l="wrapper";function d(e){let{components:t,...r}=e;return(0,n.kt)(l,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"dynamic-routes"},"Dynamic Routes"),(0,n.kt)("p",null,'For certain applications, using predefined paths (such as "/", "/about", "/dashboard", etc.) may not be enough. We may also wish to have paths that support "route" parameters, as well as "query" parameters, such as:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'"/product/',(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("em",{parentName:"strong"},"id")),'" - where ',(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("em",{parentName:"strong"},"id"))," can be any value, ie: 5"),(0,n.kt)("li",{parentName:"ul"},'"/products?',(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("em",{parentName:"strong"},"query")),'" - where ',(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("em",{parentName:"strong"},"query")),' can be an optional query string, ie: "page=1&category=stationary"')),(0,n.kt)("p",null,'While there is no change to our filenames to support optional query strings, we do have to use a special convention if we wish to accommodate "route" parameters. For example the file:'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"pages/product/[id].js"\n')),(0,n.kt)("p",null,'can be used to create a "product" page that accepts an "id" route parameter.'),(0,n.kt)("h2",{id:"reading-route-parameters"},"Reading Route Parameters"),(0,n.kt)("p",null,'In order to actually read and display a route parameter (product "id" in the above case), the ',(0,n.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#router-object"},'"router"')," object once must again be obtained using the ",(0,n.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#userouter"},'"useRouter"'),' hook from "next/router":'),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"File:"),' "pages/product/',"[id]",'.js"'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useRouter } from 'next/router';\n\nexport default function Product() {\n  const router = useRouter();\n  const { id } = router.query;\n\n  return <p>Product: {id}</p>\n}\n")),(0,n.kt)("p",null,'Here, we have made use of the "query" property of router to obtain an object containing a property: "id" that matches the filename: ',"[id]",'.js"'),(0,n.kt)("h2",{id:"reading-query-parameters"},"Reading Query Parameters"),(0,n.kt)("p",null,'Reading query parameters follows the exact same procedure. Let\'s see how we go about reading the "page" and "category" query parameters as specified above:'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useRouter } from 'next/router'\n\nexport default function Products() {\n  const router = useRouter()\n  const { page } = router.query;\n  const { category } = router.query;\n\n  if (page && category) {\n    return <p>Products for page: {page} &amp; category: {category}</p>\n  } else {\n    return <p>Page and/or Category Parameters Missing</p>\n  }\n}\n")),(0,n.kt)("p",null,'Once again we have made use of the "query" property of router to obtain an object containing properties that match each query parameter. However, since these are technically optional parameters (it is possible to navigate to the route without them), we should check to make sure they exist before we render any data related to them.'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"NOTE"),': if there are duplicate values for a query parameter, ie: "category=stationary&category=office", then the "category" property will contain an array containing the values: ',(0,n.kt)("inlineCode",{parentName:"p"},'["stationary", "office"]'))),(0,n.kt)("h2",{id:"dynamic-routes-with-getstaticprops"},"Dynamic Routes with 'getStaticProps'"),(0,n.kt)("p",null,"If you wish to use 'getStaticProps' with dynamic routes, things become slightly more complicated. In a route that always fetches data from the same API endpoint, having the data available for pre-rendering is straightforward since the \"fetch\" statement always pulls data from the same location. However, if the route is dynamic, it becomes more difficult to pull the data ahead of time using 'getStaticProps'. To solve this problem, Next.js has an asynchronous ",(0,n.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/basic-features/data-fetching/get-static-paths"},'"getStaticPaths"')," function that must be used in ",(0,n.kt)("em",{parentName:"p"},"addition"),' to "getStaticProps". To see how this works, consider the following example:'),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"File:"),' "pages/post/',"[id]",'.js"'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},'export async function getStaticPaths() {\n  // pre-render and support post/1 through post/5 only\n  return {\n    paths: [\n      { params: { id: "1" } },\n      { params: { id: "2" } },\n      { params: { id: "3" } },\n      { params: { id: "4" } },\n      { params: { id: "5" } }\n    ], fallback: false // any pages not identified above, will result in a 404 error, ie post/6\n  }\n}\n\nexport async function getStaticProps(context) {\n\n  const res = await fetch(`https://jsonplaceholder.typicode.com/posts/${context.params.id}`)\n  const data = await res.json()\n\n  return { props: { post: data } }\n}\n\nexport default function Post(props) {\n  return <>\n    <p><strong>User ID:</strong> {props.post.userId}</p>\n    <p><strong>ID:</strong> {props.post.id}</p>\n    <p><strong>Title:</strong> {props.post.title}</p>\n    <p><strong>Body:</strong> {props.post.body}</p>\n  </>\n}\n')),(0,n.kt)("p",null,'Here, we have a component "Post" that is located within the "pages" directory at "pages/post/',"[id]",'.js". We also have "getStaticProps" as we have seen it before, except in this case it accepts a "context" parameter that provides the function with one of the id\'s in the list of paths returned from the "getStaticPaths" function (ie: context.params.id).'),(0,n.kt)("p",null,'All of the supported route parameters are included in the "paths" property of the return value for the "getStaticPaths" function - if the user tries to access a route containing a parameter that is not listed in "paths", a 404 error will be returned. This is because an additional "fallback" property has explicitly been set to false. If this functionality is not desired, then fallback can be set to true (see: ',(0,n.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/data-fetching/get-static-paths#fallback-true"},'the official documentation for "fallback: true"')," for more information)."),(0,n.kt)("p",null,'Finally, you will notice that in our "Post" component, we do not have to explicitly read the route parameter using the ',(0,n.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/next/router#userouter"},'"useRouter"'),' hook (as above). The "post" property in "props" will automatically contain the data for the correct "id" parameter.'),(0,n.kt)("h2",{id:"custom-error-pages"},"Custom Error Pages"),(0,n.kt)("p",null,"Finally, you may have noticed by now that Next.js provides its own ",(0,n.kt)("strong",{parentName:"p"},"404")," and ",(0,n.kt)("strong",{parentName:"p"},"500"),' error pages. However, it is possible to create your own as well. In this case all that is required is that you create a "404.js" or "500.js" file in the "pages" directory, ie:'),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"File:"),' "pages/404.js"'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function Custom404() {\n  return <h1>404 - Page Not Found</h1>\n}\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"File:"),' "pages/500.js"'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function Custom500() {\n  return <h1>500 - Server-side error occurred</h1>\n}\n")))}d.isMDXComponent=!0},8209:(e,t,r)=>{r(7294)}}]);